<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>à¸‚à¹‰à¸­ 12 â€“ à¸„à¸³à¸¢à¸·à¸¡à¸ˆà¸²à¸à¸ à¸²à¸©à¸²à¸ˆà¸µà¸™</title>
<link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{--gold:#f5c842;--dark:#0d0a1e;--card:#1e1a3a;--acc:#7c3aed;--green:#22c55e;--red:#ef4444;--lc:#ef4444;--lb:rgba(239,68,68,0.15);}
*{margin:0;padding:0;box-sizing:border-box;}
body{background:var(--dark);color:#e2d9f3;font-family:'Sarabun',sans-serif;min-height:100vh;
  display:flex;align-items:center;justify-content:center;padding:20px 16px;
  background-image:radial-gradient(ellipse at 20% 20%,#1a0a3e 0%,transparent 60%),
                   radial-gradient(ellipse at 80% 80%,#0a1a3e 0%,transparent 60%);}
.card{background:var(--card);border:1px solid rgba(124,58,237,.45);border-radius:20px;
  padding:24px;max-width:580px;width:100%;box-shadow:0 0 50px rgba(124,58,237,.2);}
.topbar{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px;margin-bottom:12px;}
.pill{border-radius:100px;padding:5px 14px;font-size:.78rem;font-weight:700;}
.pill-q{background:rgba(124,58,237,.2);border:1px solid rgba(124,58,237,.45);color:#c4b5fd;}
.pill-lv{background:var(--lb);border:1px solid var(--lc);color:var(--lc);}
.pill-sc{background:rgba(245,200,66,.12);border:1px solid rgba(245,200,66,.35);color:var(--gold);min-width:120px;text-align:center;}
.subject{font-size:.73rem;color:#6d5fa0;margin-bottom:12px;}
/* group */
.gpick{background:rgba(124,58,237,.08);border:1px solid rgba(124,58,237,.28);border-radius:14px;padding:14px 16px;margin-bottom:16px;}
.gpick-label{font-size:.82rem;color:#c4b5fd;font-weight:700;margin-bottom:10px;}
.gbtns{display:flex;gap:8px;flex-wrap:wrap;}
.gbtn{background:rgba(124,58,237,.15);border:2px solid rgba(124,58,237,.3);border-radius:10px;
  padding:9px 18px;color:#c4b5fd;font-family:'Sarabun',sans-serif;font-size:.95rem;font-weight:700;cursor:pointer;transition:all .15s;}
.gbtn:hover{border-color:var(--acc);background:rgba(124,58,237,.3);color:#fff;}
.gbtn.on{border-color:var(--gold);background:rgba(245,200,66,.18);color:var(--gold);}
/* question */
.qtxt{font-size:clamp(1rem,3vw,1.18rem);font-weight:700;color:#fff;line-height:1.65;
  margin-bottom:16px;padding-bottom:14px;border-bottom:1px solid rgba(124,58,237,.2);}
/* choices */
.choices{display:flex;flex-direction:column;gap:9px;}
.cbtn{background:rgba(124,58,237,.07);border:2px solid rgba(124,58,237,.22);border-radius:13px;
  padding:13px 16px;color:#ddd6f3;font-family:'Sarabun',sans-serif;font-size:.97rem;font-weight:600;
  text-align:left;cursor:pointer;transition:all .15s;display:flex;align-items:center;gap:11px;width:100%;}
.cbtn:hover:not([disabled]):not(.on){border-color:var(--acc);background:rgba(124,58,237,.18);transform:translateX(4px);}
.cbtn.on{border-color:var(--gold);background:rgba(245,200,66,.14);color:var(--gold);}
.cbtn[disabled]{cursor:default;}
.cbtn.correct{border-color:var(--green)!important;background:rgba(34,197,94,.18)!important;color:var(--green)!important;}
.cbtn.wrong{border-color:var(--red)!important;background:rgba(239,68,68,.18)!important;color:#f87171!important;animation:shake .4s ease;}
.cbtn.reveal{border-color:var(--green)!important;background:rgba(34,197,94,.08)!important;color:var(--green)!important;}
.letter{width:28px;height:28px;flex-shrink:0;background:rgba(124,58,237,.28);border-radius:50%;
  display:flex;align-items:center;justify-content:center;font-size:.8rem;font-weight:700;}
/* confirm */
.cfm-wrap{margin-top:16px;}
#cfm{width:100%;background:linear-gradient(135deg,#7c3aed,#6d28d9);border:none;border-radius:13px;
  padding:15px;color:#fff;font-family:'Sarabun',sans-serif;font-size:1.05rem;font-weight:700;
  cursor:pointer;transition:all .2s;box-shadow:0 4px 18px rgba(124,58,237,.45);}
#cfm:hover:not([disabled]){transform:translateY(-2px);box-shadow:0 6px 24px rgba(124,58,237,.6);}
#cfm[disabled]{opacity:.38;cursor:not-allowed;transform:none!important;box-shadow:none!important;}
.status-msg{font-size:.8rem;color:#9d8ec7;text-align:center;margin-top:8px;min-height:20px;}
/* result */
.rbox{margin-top:14px;padding:16px 18px;border-radius:13px;font-weight:700;font-size:1rem;display:none;line-height:1.65;}
.rbox.ok{background:rgba(34,197,94,.15);border:1px solid rgba(34,197,94,.4);color:var(--green);}
.rbox.fail{background:rgba(239,68,68,.15);border:1px solid rgba(239,68,68,.4);color:#f87171;}
.rbox.done{background:rgba(245,200,66,.1);border:1px solid rgba(245,200,66,.3);color:var(--gold);}
.expl{margin-top:10px;padding:12px 15px;border-radius:12px;background:rgba(124,58,237,.1);
  border:1px solid rgba(124,58,237,.3);color:#b4a4e0;font-size:.87rem;display:none;line-height:1.55;}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-7px)}75%{transform:translateX(7px)}}
</style>
</head>
<body>
<div class="card">
  <div class="topbar">
    <span class="pill pill-q">ğŸ“š à¸‚à¹‰à¸­ 12/20</span>
    <span class="pill pill-lv">ğŸ”´ à¸£à¸°à¸”à¸±à¸šà¸¢à¸²à¸</span>
    <span class="pill pill-sc" id="sc">â­ à¹€à¸¥à¸·à¸­à¸à¸à¸¥à¸¸à¹ˆà¸¡à¸à¹ˆà¸­à¸™</span>
  </div>
  <div class="subject">ğŸˆ¶ à¸„à¸³à¸¢à¸·à¸¡à¸ˆà¸²à¸à¸ à¸²à¸©à¸²à¸ˆà¸µà¸™ Â· à¸ à¸²à¸©à¸²à¹„à¸—à¸¢ à¸¡.à¸›à¸¥à¸²à¸¢</div>

  <div class="gpick" id="gpick">
    <div class="gpick-label">ğŸ‘¥ à¹€à¸¥à¸·à¸­à¸à¸à¸¥à¸¸à¹ˆà¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸à¹ˆà¸­à¸™</div>
    <div class="gbtns">
      <button class="gbtn" data-g="1">à¸à¸¥à¸¸à¹ˆà¸¡ 1</button>
      <button class="gbtn" data-g="2">à¸à¸¥à¸¸à¹ˆà¸¡ 2</button>
      <button class="gbtn" data-g="3">à¸à¸¥à¸¸à¹ˆà¸¡ 3</button>
      <button class="gbtn" data-g="4">à¸à¸¥à¸¸à¹ˆà¸¡ 4</button>
      <button class="gbtn" data-g="5">à¸à¸¥à¸¸à¹ˆà¸¡ 5</button>
      <button class="gbtn" data-g="6">à¸à¸¥à¸¸à¹ˆà¸¡ 6</button>
    </div>
  </div>

  <div class="qtxt">à¸‚à¹‰à¸­ 12. à¸‚à¹‰à¸­à¹ƒà¸”à¹€à¸›à¹‡à¸™à¸„à¸³à¸—à¸µà¹ˆà¸œà¹ˆà¸²à¸™à¸à¸£à¸°à¸šà¸§à¸™à¸à¸²à¸£à¸›à¸£à¸±à¸šà¹€à¸ªà¸µà¸¢à¸‡à¹ƒà¸«à¹‰à¹€à¸‚à¹‰à¸²à¸à¸±à¸šà¸£à¸°à¸šà¸šà¹€à¸ªà¸µà¸¢à¸‡à¸ à¸²à¸©à¸²à¹„à¸—à¸¢</div>
  <div class="choices" id="choices"><button class="cbtn"><span class="letter">à¸</span>à¸šà¸°à¸«à¸¡à¸µà¹ˆ</button>
<button class="cbtn"><span class="letter">à¸‚</span>à¹€à¸•à¹‰à¸²à¸«à¸¹à¹‰</button>
<button class="cbtn"><span class="letter">à¸„</span>à¸à¹‹à¸§à¸¢à¹€à¸•à¸µà¹‹à¸¢à¸§</button>
<button class="cbtn"><span class="letter">à¸‡</span>à¸–à¸¹à¸à¸—à¸¸à¸à¸‚à¹‰à¸­</button>
</div>

  <div class="cfm-wrap">
    <button id="cfm" disabled>âœ… à¸¢à¸·à¸™à¸¢à¸±à¸™à¸„à¸³à¸•à¸­à¸š</button>
  </div>
  <div class="status-msg" id="status"></div>
  <div class="rbox" id="rbox"></div>
  <div class="expl" id="expl">ğŸ’¡ à¸šà¸°à¸«à¸¡à¸µà¹ˆ à¹€à¸•à¹‰à¸²à¸«à¸¹à¹‰ à¸à¹‹à¸§à¸¢à¹€à¸•à¸µà¹‹à¸¢à¸§ à¸¥à¹‰à¸§à¸™à¸œà¹ˆà¸²à¸™à¸à¸£à¸°à¸šà¸§à¸™à¸à¸²à¸£à¸›à¸£à¸±à¸šà¹€à¸ªà¸µà¸¢à¸‡à¹ƒà¸«à¹‰à¹€à¸‚à¹‰à¸²à¸à¸±à¸šà¸§à¸£à¸£à¸“à¸¢à¸¸à¸à¸•à¹Œà¹„à¸—à¸¢</div>
</div>
<script>
(function(){{
  var QNUM=12, CORRECT=3, TOTAL=20;
  var API='/api/score';
  var group=null, selIdx=-1, done=false;

  var gpick=document.getElementById('gpick');
  var cfm=document.getElementById('cfm');
  var rbox=document.getElementById('rbox');
  var expl=document.getElementById('expl');
  var sc=document.getElementById('sc');
  var status=document.getElementById('status');
  var cbtns=Array.prototype.slice.call(document.querySelectorAll('.cbtn'));

  function lockAll(){{ cbtns.forEach(function(b){{b.setAttribute('disabled','');}}) }}
  function showBox(cls,html){{ rbox.className='rbox '+cls; rbox.innerHTML=html; rbox.style.display='block'; }}
  function setStatus(msg){{ status.textContent=msg; }}

  // â”€â”€ à¸à¸”à¹€à¸¥à¸·à¸­à¸à¸à¸¥à¸¸à¹ˆà¸¡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.querySelectorAll('.gbtn').forEach(function(btn){{
    btn.addEventListener('click', function(){{
      group = parseInt(this.getAttribute('data-g'));
      document.querySelectorAll('.gbtn').forEach(function(b){{
        b.classList.toggle('on', parseInt(b.getAttribute('data-g'))===group);
      }});
      gpick.style.display='none';
      sc.textContent='â³ à¹‚à¸«à¸¥à¸”à¸„à¸°à¹à¸™à¸™...';

      // à¸”à¸¶à¸‡à¸„à¸°à¹à¸™à¸™à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™à¸‚à¸­à¸‡à¸à¸¥à¸¸à¹ˆà¸¡ + à¹€à¸Šà¹‡à¸„à¸§à¹ˆà¸²à¸—à¸³à¸‚à¹‰à¸­à¸™à¸µà¹‰à¹à¸¥à¹‰à¸§à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡
      fetch(API)
        .then(function(r){{return r.json();}})
        .then(function(j){{
          if(!j.ok) throw new Error('api error');
          var gd = j.groups[group] || {{score:0,answered:[]}};
          sc.textContent='â­ à¸à¸¥à¸¸à¹ˆà¸¡ '+group+': '+gd.score+' à¸„à¸°à¹à¸™à¸™';

          if(gd.answered.indexOf(QNUM) !== -1){{
            done=true;
            lockAll();
            cfm.setAttribute('disabled','');
            cfm.textContent='âœ” à¸à¸¥à¸¸à¹ˆà¸¡à¸™à¸µà¹‰à¸—à¸³à¸‚à¹‰à¸­à¸™à¸µà¹‰à¹à¸¥à¹‰à¸§';
            cbtns[CORRECT].classList.add('reveal');
            var left=TOTAL-gd.answered.length;
            showBox('done','ğŸ“œ à¸à¸¥à¸¸à¹ˆà¸¡ '+group+' à¸—à¸³à¸‚à¹‰à¸­à¸™à¸µà¹‰à¹à¸¥à¹‰à¸§<br>'
              +'<small style="font-weight:400;font-size:.85rem">'
              +'à¸„à¸°à¹à¸™à¸™à¸ªà¸°à¸ªà¸¡: '+gd.score+' à¸„à¸°à¹à¸™à¸™ Â· à¹€à¸«à¸¥à¸·à¸­à¸­à¸µà¸ '+left+' à¸‚à¹‰à¸­</small>');
            expl.style.display='block';
          }}
        }})
        .catch(function(){{ sc.textContent='â­ à¸à¸¥à¸¸à¹ˆà¸¡ '+group+' (offline)'; }});
    }});
  }});

  // â”€â”€ à¸à¸”à¹€à¸¥à¸·à¸­à¸à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  cbtns.forEach(function(btn, idx){{
    btn.addEventListener('click', function(){{
      if(done) return;
      if(!group){{
        gpick.style.outline='2px solid rgba(239,68,68,.7)';
        setTimeout(function(){{gpick.style.outline='';}}, 1500);
        return;
      }}
      selIdx=idx;
      cbtns.forEach(function(b,i){{b.classList.toggle('on',i===idx);}});
      cfm.removeAttribute('disabled');
    }});
  }});

  // â”€â”€ à¸à¸”à¸¢à¸·à¸™à¸¢à¸±à¸™ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  cfm.addEventListener('click', function(){{
    if(done || selIdx===-1 || !group) return;
    done=true;
    cfm.setAttribute('disabled','');
    lockAll();
    setStatus('â³ à¸à¸³à¸¥à¸±à¸‡à¸šà¸±à¸™à¸—à¸¶à¸...');

    var correct=(selIdx===CORRECT);

    fetch(API, {{
      method:'POST',
      headers:{{'Content-Type':'application/json'}},
      body:JSON.stringify({{group:group, qnum:QNUM, correct:correct}})
    }})
    .then(function(r){{return r.json();}})
    .then(function(j){{
      setStatus('');
      var gd = j.data || {{score:0, answered:[]}};
      var left = TOTAL - (gd.answered ? gd.answered.length : 0);
      sc.textContent='â­ à¸à¸¥à¸¸à¹ˆà¸¡ '+group+': '+gd.score+' à¸„à¸°à¹à¸™à¸™';
      cfm.textContent='âœ” à¸šà¸±à¸™à¸—à¸¶à¸à¹à¸¥à¹‰à¸§';

      cbtns[selIdx].classList.remove('on');

      if(j.duplicate){{
        cbtns[CORRECT].classList.add('reveal');
        showBox('done','ğŸ“œ à¸à¸¥à¸¸à¹ˆà¸¡ '+group+' à¸—à¸³à¸‚à¹‰à¸­à¸™à¸µà¹‰à¹„à¸›à¹à¸¥à¹‰à¸§<br>'
          +'<small style="font-weight:400;font-size:.85rem">à¸„à¸°à¹à¸™à¸™à¸ªà¸°à¸ªà¸¡: '+gd.score+' Â· à¹€à¸«à¸¥à¸·à¸­ '+left+' à¸‚à¹‰à¸­</small>');
      }} else if(correct){{
        cbtns[selIdx].classList.add('correct');
        showBox('ok','ğŸ‰ à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡! à¸à¸¥à¸¸à¹ˆà¸¡ '+group+' à¹„à¸”à¹‰ +1 à¸„à¸°à¹à¸™à¸™<br>'
          +'<small style="font-weight:400;font-size:.85rem">'
          +'à¸„à¸°à¹à¸™à¸™à¸ªà¸°à¸ªà¸¡à¸à¸¥à¸¸à¹ˆà¸¡ '+group+': <b>'+gd.score+'</b> à¸„à¸°à¹à¸™à¸™'
          +(left>0?' Â· à¹€à¸«à¸¥à¸·à¸­à¸­à¸µà¸ <b>'+left+'</b> à¸‚à¹‰à¸­':' Â· <b>à¸„à¸£à¸š 20 à¸‚à¹‰à¸­à¹à¸¥à¹‰à¸§! ğŸ†</b>')
          +'</small>');
      }} else {{
        cbtns[selIdx].classList.add('wrong');
        cbtns[CORRECT].classList.add('reveal');
        showBox('fail','âŒ à¸•à¸­à¸šà¸œà¸´à¸” â€” à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸„à¸°à¹à¸™à¸™<br>'
          +'<small style="font-weight:400;font-size:.85rem">'
          +'à¸„à¸°à¹à¸™à¸™à¸ªà¸°à¸ªà¸¡à¸à¸¥à¸¸à¹ˆà¸¡ '+group+': <b>'+gd.score+'</b> à¸„à¸°à¹à¸™à¸™'
          +(left>0?' Â· à¹€à¸«à¸¥à¸·à¸­à¸­à¸µà¸ <b>'+left+'</b> à¸‚à¹‰à¸­':' Â· <b>à¸„à¸£à¸š 20 à¸‚à¹‰à¸­à¹à¸¥à¹‰à¸§! ğŸ†</b>')
          +'</small>');
      }}
      expl.style.display='block';
    }})
    .catch(function(){{
      setStatus('âš ï¸ à¸šà¸±à¸™à¸—à¸¶à¸à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ â€” à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­');
      cfm.textContent='ğŸ”„ à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ';
      cfm.removeAttribute('disabled');
      done=false;
    }});
  }});
}})();
</script>
</body>
</html>